package main;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

import DTO.MembersDTO;
import manager.MembersDAO;

public class Members_main {
	public static void main(String[] args) {
		MembersDAO membersdao = new MembersDAO();

		try(Scanner sc = new Scanner(System.in);){
			while(true) {
				System.out.println("<< index >>");
				System.out.println("1. 로그인");
				System.out.println("2. 회원가입");
				System.out.println("0. 종료");
				int menu = Integer.parseInt(sc.nextLine());
				try {
					if(menu == 1) {
						System.out.print("로그인 아이디 입력 : ");
						String id = sc.nextLine();
						System.out.print("로그인 비밀번호 입력 : ");
						String pw = sc.nextLine();
						
						List<MembersDTO> result = membersdao.login(id, pw);
						
						if(result) {
							System.out.println("로그인 성공");
						}else {
							System.out.println("로그인 실패");
						}
						
					}else if(menu == 2) {
						System.out.print("생성할 아이디 입력 : ");
						String id = sc.nextLine();
						System.out.print("생성할 비밀번호 입력 : ");
						String pw = sc.nextLine();
						System.out.print("사용자 이름 입력 : ");
						String name = sc.nextLine();
						System.out.print("사용자 연락처 입력 : ");
						String contact = sc.nextLine();

						int result = membersdao.insert(new MembersDTO(id, pw, name, contact,null));
					
						if(result>0) {
							System.out.println("아이디 생성");
						}else {
							System.out.println("생성 실패");
						}

					}else if(menu == 0) {
						System.out.println("시스템을 종료합니다.");
						System.exit(0);
					}else {
						System.out.println("메뉴를 다시 확인해주세요.");
					}
				}catch(Exception e) {
					e.printStackTrace();
				}
			}
		}
	}
}
